var e=Object.defineProperty,a=Object.defineProperties,l=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,u=(a,l,t)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[l]=t,p=(e,a)=>{for(var l in a||(a={}))n.call(a,l)&&u(e,l,a[l]);if(t)for(var l of t(a))o.call(a,l)&&u(e,l,a[l]);return e};import{d as s,ac as r,r as c,o as i,ad as v,g as d,w as f,ah as y,f as b,i as h,af as m,ag as g,ap as _,av as x,al as N,at as w,ai as $,aw as j,j as S,aj as k,ak as O}from"./vendor.bb732f7c.js";import{_ as C}from"./index.vue_vue_type_script_setup_true_lang.98331e73.js";const I=[{component:"div",inner:"这是一个div"},{component:"h1",inner:"这是一个标题",layout:{span:10}},{component:"NInput",label:{expression:"{type}",value:"默认标题"},type:"textarea",layout:{span:5},path:"remark"},{component:"NSelect",label:"选择歌曲",path:"song",layout:{span:3},options:[{label:"Everybody's Got Something to Hide Except Me and My Monkey",value:"song0",disabled:!0},{label:"Drive My Car",value:"song1"},{label:"Norwegian Wood",value:"song2"},{label:"You Won't See",value:"song3",disabled:!0},{label:"Nowhere Man",value:"song4"},{label:"Think For Yourself",value:"song5"}]},{component:"NSelect",label:"性别",path:"gender",layout:{span:2},options:[{label:"女",value:0},{label:"男",value:1}]},{show:{type:"boolean",expression:"{gender} = 1"},component:"NInput",label:"薪资多少",path:"income"}],E=[{component:"NInput",path:"path",label:"字段",layout:{span:4}},{component:"ExpressionWrap",innerComponent:"NInput",path:"label",label:"表单项标题",layout:{span:4,offset:1}},{component:"ExpressionWrap",innerComponent:"NInput",path:"inner",label:"内容",layout:{span:4}},{component:"NSelect",path:"component",label:"组件",filterable:!0,tag:!0,layout:{offset:1,span:4},options:[{label:"输入框",value:"NInput"},{label:"选择器",value:"NSelect"},{label:"单选框",value:"NRadio"},{label:"开关",value:"NSwitch"},{label:"复选框",value:"Checkbox"},{label:"日期选择器",value:"NDatePicker"}]},{component:"NInputNumber",path:"layoutSpan",label:"Span",max:10,min:1,defaultValue:2,style:{width:"100%"},layout:{span:4}},{component:"NInputNumber",path:"layoutOffset",label:"偏移",max:10,min:0,defaultValue:2,style:{width:"100%"},layout:{offset:1,span:4}}],W=[{component:"NInput",path:"value",label:"默认值",layout:{span:10}},{component:"NInput",path:"expression",label:"表达式",layout:{span:10}},{component:"NSelect",path:"type",label:"数据类型",layout:{span:10},options:[{label:"数字",value:"number"},{label:"字符串",value:""},{label:"布尔值",value:"boolean"}]}];var P=s({__name:"ExpressionWrap",props:{innerComponent:null,innerAttr:null,value:{default:""}},emits:["updateValue","update:value"],setup(e,{emit:a}){const{innerComponent:l,innerAttr:t,value:n}=e,o={labelPlacement:"left",labelWidth:"80px"},u=r(n),p=1,s=2,x=r("object"==typeof n?p:s),N=e=>{a("updateValue",e)};return(e,a)=>{const n=c("n-radio"),r=c("n-space"),w=c("n-radio-group"),$=c("n-card");return i(),v(_,null,[d(w,{value:x.value,"onUpdate:value":a[0]||(a[0]=e=>x.value=e),name:"radiogroup"},{default:f((()=>[d(r,null,{default:f((()=>[d(n,{value:s},{default:f((()=>[y(" 值 ")])),_:1},8,["value"]),d(n,{value:p},{default:f((()=>[y(" 表达式 ")])),_:1},8,["value"])])),_:1})])),_:1},8,["value"]),x.value===p?(i(),b($,{key:0},{default:f((()=>[d(C,{config:o,content:h(W),onUpdate:N},null,8,["content"])])),_:1})):(i(),b(g(l),m({key:1},t,{value:u.value,"onUpdate:value":[a[1]||(a[1]=e=>u.value=e),N]}),null,16,["value"]))],64)}}});const U={class:"schema-opr-wrap"},M={class:"opr-state-wrap"},A=(e=>(k("data-v-cecc227c"),e=e(),O(),e))((()=>N("div",null,null,-1)));var V=s({__name:"index",setup(e){const t=x(),n=r(!1),o=r(),u=r(),s=r(I),m='{\n  "type": "操作备注",\n  "remark": "备注test",\n  "song": "song1",\n  "gender": 1\n}',g=r(m),k=r(JSON.parse(m)),O={ExpressionWrap:P},W=()=>{try{k.value=JSON.parse(g.value)}catch(e){}},V={labelWidth:"80px"},D=r(),J=r(),Y=e=>{J.value=e},z=r(!1),B=r(),F=()=>{z.value=!0,B.value=[H()]},G=()=>{const e=s.value;e[u.value]=H(),s.value=e,t.success(`修改第${u.value+1}个表单项配置成功`),n.value=!1},H=()=>{const e=(t=p({},J.value),n={layout:{span:J.value.layoutSpan,offset:J.value.layoutOffset}},a(t,l(n)));var t,n;return delete e.layoutSpan,delete e.layoutOffset,Object.keys(e).forEach((a=>{""===e[a]&&delete e[a]})),e},R=e=>["component","label","path"].filter((a=>"string"==typeof e[a])).map((a=>e[a])).join("-"),T=(e=1)=>"  ".repeat(e),q=(e,a=1)=>{const l=[],t=Object.keys(e),n=t.length;return t.forEach(((t,o)=>{if("object"==typeof e[t])if(Array.isArray(e[t])){l.push(`${T(a)}"${t}": [\n`);const u=e[t].length;e[t].forEach(((e,t)=>{l.push(`${T(a+1)}{\n${q(e,a+2).join("")}${T(a+1)}${t!==u-1?"},\n":"}"}`)})),l.push(`\n${T(a)}]${o!==n-1?",":""}\n`)}else l.push(`${T(a)}"${t}": {\n${q(e[t],a+1).join("")}${T(a)}}${o!==n-1?",":""}\n`);else l.push(`${T(a)}"${t}": ${"string"==typeof e[t]?`"${e[t]}"`:e[t]}${o!==n-1?",":""}\n`)})),l};return(e,a)=>{const l=c("n-text"),t=c("n-button"),r=c("n-button-group"),m=c("n-code"),x=c("n-collapse-item"),I=c("n-collapse"),P=c("n-scrollbar"),H=c("n-input"),T=c("n-card"),K=c("NButton"),L=c("NCard"),Q=c("n-drawer-content"),X=c("n-drawer");return i(),v(_,null,[N("div",U,[d(T,{title:"表单项编辑",contentStyle:"padding: 0","header-style":"height: 50px"},{default:f((()=>[d(P,{style:{height:"70vh"}},{default:f((()=>[d(I,{class:"opr-content-list-wrap"},{default:f((()=>[(i(!0),v(_,null,w(s.value,((e,a)=>(i(),b(x,{name:a,class:"schema-item-wrap"},{header:f((()=>[d(l,null,{default:f((()=>[y($(R(e)),1)])),_:2},1024)])),"header-extra":f((()=>[d(r,{size:"small"},{default:f((()=>[d(t,{type:"primary",round:"",onClick:j((()=>((e,a)=>{var l,t,s,r;n.value=!0,o.value=e,u.value=a;const c={layoutSpan:null!=(t=null==(l=e.layout)?void 0:l.span)?t:5,layoutOffset:null!=(r=null==(s=e.layout)?void 0:s.offset)?r:0};D.value=p(p({},e),c),Y(D.value),F()})(e,a)),["stop"])},{default:f((()=>[y(" 修改 ")])),_:2},1032,["onClick"]),d(t,{type:"error"},{default:f((()=>[y(" 删除 ")])),_:1}),d(t,{type:"default"},{default:f((()=>[y(" 复制 ")])),_:1})])),_:2},1024)])),default:f((()=>[d(m,{code:`{\n${q(e).join("")}}`,language:"json"},null,8,["code"])])),_:2},1032,["name"])))),256))])),_:1})])),_:1}),d(T,{title:"表单初始状态编辑",contentStyle:"padding: 0 10px","header-style":"height: 50px"},{default:f((()=>[N("div",M,[N("div",null,[d(t,{onClick:W},{default:f((()=>[y(" 保存 ")])),_:1})]),d(H,{style:{height:"calc(30vh - 110px)"},type:"textarea",value:g.value,"onUpdate:value":a[0]||(a[0]=e=>g.value=e)},null,8,["value"])])])),_:1})])),_:1}),d(T,{title:"表单预览"},{default:f((()=>[d(C,{config:V,content:s.value,state:k.value},null,8,["content","state"])])),_:1})]),d(X,{show:n.value,"onUpdate:show":a[1]||(a[1]=e=>n.value=e),placement:"right",width:"calc(100vw - 600px)"},{default:f((()=>[d(Q,null,{default:f((()=>[A,d(C,{config:V,customComponents:O,content:h(E),onUpdate:Y,state:D.value},null,8,["content","state"]),N("div",null,$(J.value),1),d(L,{title:"预览"},{"header-extra":f((()=>[d(K,{onClick:F},{default:f((()=>[y("更新预览")])),_:1}),d(K,{type:"primary",onClick:G},{default:f((()=>[y("保存")])),_:1})])),default:f((()=>[z.value?(i(),b(C,{key:0,config:V,content:B.value},null,8,["content"])):S("",!0)])),_:1})])),_:1})])),_:1},8,["show"])],64)}}});V.__scopeId="data-v-cecc227c";export{V as default};
