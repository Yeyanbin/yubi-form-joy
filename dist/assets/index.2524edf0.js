var e=Object.defineProperty,a=Object.defineProperties,l=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,u=(a,l,t)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[l]=t,p=(e,a)=>{for(var l in a||(a={}))n.call(a,l)&&u(e,l,a[l]);if(t)for(var l of t(a))o.call(a,l)&&u(e,l,a[l]);return e};import{d as s,a7 as r,r as c,o as i,a8 as d,e as v,w as f,b as y,u as b,aa as h,ab as m,aj as g,ac as _,aq as x,ag as N,ao as w,ad as $,ar as j,ai as S,ae as O,af as k}from"./vendor.36941f7e.js";import{_ as C}from"./index.vue_vue_type_script_setup_true_lang.93b1a518.js";const I=[{component:"div",inner:"这是一个div"},{component:"h1",inner:"这是一个标题",layout:{span:10}},{component:"NInput",label:{expression:"{type}",value:"默认标题"},type:"textarea",layout:{span:5},path:"remark"},{component:"NSelect",label:"选择歌曲",path:"song",layout:{span:3},options:[{label:"Everybody's Got Something to Hide Except Me and My Monkey",value:"song0",disabled:!0},{label:"Drive My Car",value:"song1"},{label:"Norwegian Wood",value:"song2"},{label:"You Won't See",value:"song3",disabled:!0},{label:"Nowhere Man",value:"song4"},{label:"Think For Yourself",value:"song5"}]},{component:"NSelect",label:"性别",path:"gender",layout:{span:2},options:[{label:"女",value:0},{label:"男",value:1}]},{show:{type:"boolean",expression:"{gender} = 1"},component:"NInput",label:"薪资多少",path:"income"}],E=[{component:"NInput",path:"path",label:"字段",layout:{span:4}},{component:"ExpressionWrap",innerComponent:"NInput",path:"label",label:"表单项标题",layout:{span:4,offset:1}},{component:"ExpressionWrap",innerComponent:"NInput",path:"inner",label:"内容",layout:{span:4}},{component:"NSelect",path:"component",label:"组件",filterable:!0,tag:!0,layout:{offset:1,span:4},options:[{label:"输入框",value:"NInput"},{label:"选择器",value:"NSelect"},{label:"单选框",value:"NRadio"},{label:"开关",value:"NSwitch"},{label:"复选框",value:"Checkbox"},{label:"日期选择器",value:"NDatePicker"}]},{component:"NInputNumber",path:"layoutSpan",label:"Span",max:10,min:1,defaultValue:2,style:{width:"100%"},layout:{span:4}},{component:"NInputNumber",path:"layoutOffset",label:"偏移",max:10,min:0,defaultValue:2,style:{width:"100%"},layout:{offset:1,span:4}}],W=[{component:"NInput",path:"value",label:"默认值",layout:{span:10}},{component:"NInput",path:"expression",label:"表达式",layout:{span:10}},{component:"NSelect",path:"type",label:"数据类型",layout:{span:10},options:[{label:"数字",value:"number"},{label:"字符串",value:""},{label:"布尔值",value:"boolean"}]}],P=_(" 值 "),U=_(" 表达式 ");var M=s({name:"ExpressionWrap",props:{innerComponent:null,innerAttr:null,value:{default:""}},emits:["updateValue","update:value"],setup(e,{emit:a}){const{innerComponent:l,innerAttr:t,value:n}=e,o={labelPlacement:"left",labelWidth:"80px"},u=r(n),p=1,s=2,_=r("object"==typeof n?p:s),x=e=>{a("updateValue",e)};return(e,a)=>{const n=c("n-radio"),r=c("n-space"),N=c("n-radio-group"),w=c("n-card");return i(),d(g,null,[v(N,{value:_.value,"onUpdate:value":a[0]||(a[0]=e=>_.value=e),name:"radiogroup"},{default:f((()=>[v(r,null,{default:f((()=>[v(n,{value:s},{default:f((()=>[P])),_:1},8,["value"]),v(n,{value:p},{default:f((()=>[U])),_:1},8,["value"])])),_:1})])),_:1},8,["value"]),_.value===p?(i(),y(w,{key:0},{default:f((()=>[v(C,{config:o,content:b(W),onUpdate:x},null,8,["content"])])),_:1})):(i(),y(m(l),h({key:1},t,{value:u.value,"onUpdate:value":[a[1]||(a[1]=e=>u.value=e),x]}),null,16,["value"]))],64)}}});const A=e=>(O("data-v-0c938463"),e=e(),k(),e),V={class:"schema-opr-wrap"},D=_(" 修改 "),J=_(" 删除 "),Y=_(" 复制 "),q={class:"opr-state-wrap"},z=_(" 保存 "),B=A((()=>N("div",null,null,-1))),F=_("更新预览"),G=_("保存");var H=s({name:"index",setup(e){const t=x(),n=r(!1),o=r(),u=r(),s=r(I),h='{\n  "type": "操作备注",\n  "remark": "备注test",\n  "song": "song1",\n  "gender": 1\n}',m=r(h),O=r(JSON.parse(h)),k={ExpressionWrap:M},W=()=>{try{O.value=JSON.parse(m.value)}catch(e){}},P={labelWidth:"80px"},U=r(),A=r(),H=e=>{A.value=e},R=r(!1),T=r(),K=()=>{R.value=!0,T.value=[Q()]},L=()=>{const e=s.value;e[u.value]=Q(),s.value=e,t.success(`修改第${u.value+1}个表单项配置成功`),n.value=!1},Q=()=>{const e=(t=p({},A.value),n={layout:{span:A.value.layoutSpan,offset:A.value.layoutOffset}},a(t,l(n)));var t,n;return delete e.layoutSpan,delete e.layoutOffset,Object.keys(e).forEach((a=>{""===e[a]&&delete e[a]})),e},X=e=>["component","label","path"].filter((a=>"string"==typeof e[a])).map((a=>e[a])).join("-"),Z=(e=1)=>"  ".repeat(e),ee=(e,a=1)=>{const l=[],t=Object.keys(e),n=t.length;return t.forEach(((t,o)=>{if("object"==typeof e[t])if(Array.isArray(e[t])){l.push(`${Z(a)}"${t}": [\n`);const u=e[t].length;e[t].forEach(((e,t)=>{l.push(`${Z(a+1)}{\n${ee(e,a+2).join("")}${Z(a+1)}${t!==u-1?"},\n":"}"}`)})),l.push(`\n${Z(a)}]${o!==n-1?",":""}\n`)}else l.push(`${Z(a)}"${t}": {\n${ee(e[t],a+1).join("")}${Z(a)}}${o!==n-1?",":""}\n`);else l.push(`${Z(a)}"${t}": ${"string"==typeof e[t]?`"${e[t]}"`:e[t]}${o!==n-1?",":""}\n`)})),l};return(e,a)=>{const l=c("n-text"),t=c("n-button"),r=c("n-button-group"),h=c("n-code"),x=c("n-collapse-item"),I=c("n-collapse"),M=c("n-scrollbar"),Q=c("n-input"),Z=c("n-card"),ae=c("NButton"),le=c("NCard"),te=c("n-drawer-content"),ne=c("n-drawer");return i(),d(g,null,[N("div",V,[v(Z,{title:"表单项编辑",contentStyle:"padding: 0","header-style":"height: 50px"},{default:f((()=>[v(M,{style:{height:"70vh"}},{default:f((()=>[v(I,{class:"opr-content-list-wrap"},{default:f((()=>[(i(!0),d(g,null,w(s.value,((e,a)=>(i(),y(x,{name:a,class:"schema-item-wrap"},{header:f((()=>[v(l,null,{default:f((()=>[_($(X(e)),1)])),_:2},1024)])),"header-extra":f((()=>[v(r,{size:"small"},{default:f((()=>[v(t,{type:"primary",round:"",onClick:j((()=>((e,a)=>{var l,t,s,r;n.value=!0,o.value=e,u.value=a;const c={layoutSpan:null!=(t=null==(l=e.layout)?void 0:l.span)?t:5,layoutOffset:null!=(r=null==(s=e.layout)?void 0:s.offset)?r:0};U.value=p(p({},e),c),H(U.value),K()})(e,a)),["stop"])},{default:f((()=>[D])),_:2},1032,["onClick"]),v(t,{type:"error"},{default:f((()=>[J])),_:1}),v(t,{type:"default"},{default:f((()=>[Y])),_:1})])),_:2},1024)])),default:f((()=>[v(h,{code:`{\n${ee(e).join("")}}`,language:"json"},null,8,["code"])])),_:2},1032,["name"])))),256))])),_:1})])),_:1}),v(Z,{title:"表单初始状态编辑",contentStyle:"padding: 0 10px","header-style":"height: 50px"},{default:f((()=>[N("div",q,[N("div",null,[v(t,{onClick:W},{default:f((()=>[z])),_:1})]),v(Q,{style:{height:"calc(30vh - 110px)"},type:"textarea",value:m.value,"onUpdate:value":a[0]||(a[0]=e=>m.value=e)},null,8,["value"])])])),_:1})])),_:1}),v(Z,{title:"表单预览"},{default:f((()=>[v(C,{config:P,content:s.value,state:O.value},null,8,["content","state"])])),_:1})]),v(ne,{show:n.value,"onUpdate:show":a[1]||(a[1]=e=>n.value=e),placement:"right",width:"calc(100vw - 600px)"},{default:f((()=>[v(te,null,{default:f((()=>[B,v(C,{config:P,customComponents:k,content:b(E),onUpdate:H,state:U.value},null,8,["content","state"]),N("div",null,$(A.value),1),v(le,{title:"预览"},{"header-extra":f((()=>[v(ae,{onClick:K},{default:f((()=>[F])),_:1}),v(ae,{type:"primary",onClick:L},{default:f((()=>[G])),_:1})])),default:f((()=>[R.value?(i(),y(C,{key:0,config:P,content:T.value},null,8,["content"])):S("",!0)])),_:1})])),_:1})])),_:1},8,["show"])],64)}}});H.__scopeId="data-v-0c938463";export{H as default};
