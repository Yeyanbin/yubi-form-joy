var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,u=(a,t,l)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[t]=l,p=(e,a)=>{for(var t in a||(a={}))n.call(a,t)&&u(e,t,a[t]);if(l)for(var t of l(a))o.call(a,t)&&u(e,t,a[t]);return e};import{d as s,a6 as r,r as c,o as i,a8 as d,e as v,w as f,b as y,u as b,ah as h,al as m,aa as g,ac as x,a9 as N,ab as _,ad as w,ao as S,ap as $}from"./vendor.1f75396a.js";import{_ as j}from"./index.vue_vue&type=script&setup=true&lang.13ef2ebc.js";const O=[{component:"div",inner:"这是一个div"},{component:"h1",inner:"这是一个标题",layout:{span:10}},{component:"NInput",label:{expression:"{type}",value:"默认标题"},type:"textarea",layout:{span:5},path:"remark"},{component:"NSelect",label:"选择歌曲",path:"song",layout:{span:3},options:[{label:"Everybody's Got Something to Hide Except Me and My Monkey",value:"song0",disabled:!0},{label:"Drive My Car",value:"song1"},{label:"Norwegian Wood",value:"song2"},{label:"You Won't See",value:"song3",disabled:!0},{label:"Nowhere Man",value:"song4"},{label:"Think For Yourself",value:"song5"}]},{component:"NSelect",label:"性别",path:"gender",layout:{span:2},options:[{label:"女",value:0},{label:"男",value:1}]},{show:{type:"boolean",expression:"{gender} = 1"},component:"NInput",label:"薪资多少",path:"income"}],k=[{component:"NInput",path:"path",label:"字段",layout:{span:4}},{component:"ExpressionWrap",innerComponent:"NInput",path:"label",label:"表单项标题",layout:{span:4,offset:1}},{component:"ExpressionWrap",innerComponent:"NInput",path:"inner",label:"内容",layout:{span:4}},{component:"NSelect",path:"component",label:"组件",filterable:!0,tag:!0,layout:{offset:1,span:4},options:[{label:"输入框",value:"NInput"},{label:"选择器",value:"NSelect"},{label:"单选框",value:"NRadio"},{label:"开关",value:"NSwitch"},{label:"复选框",value:"Checkbox"},{label:"日期选择器",value:"NDatePicker"}]},{component:"NInputNumber",path:"layoutSpan",label:"Span",max:10,min:1,defaultValue:2,style:{width:"100%"},layout:{span:4}},{component:"NInputNumber",path:"layoutOffset",label:"偏移",max:10,min:1,defaultValue:2,style:{width:"100%"},layout:{offset:1,span:4}}],C=[{component:"NInput",path:"value",label:"默认值",layout:{span:10}},{component:"NInput",path:"expression",label:"表达式",layout:{span:10}},{component:"NSelect",path:"type",label:"数据类型",layout:{span:10},options:[{label:"数字",value:"number"},{label:"字符串",value:""},{label:"布尔值",value:"boolean"}]}],I=x(" 值 "),E=x(" 表达式 ");var W=s({name:"ExpressionWrap",props:{innerComponent:null,innerAttr:null,value:{default:""}},emits:["updateValue","update:value"],setup(e,{emit:a}){const{innerComponent:t,innerAttr:l,value:n}=e,o={labelPlacement:"left",labelWidth:"80px"},u=1,p=2,s=r("object"==typeof n?u:p),x=e=>{a("update:value",e)};return(e,a)=>{const r=c("n-radio"),N=c("n-space"),_=c("n-radio-group"),w=c("n-card");return i(),d(g,null,[v(_,{value:s.value,"onUpdate:value":a[0]||(a[0]=e=>s.value=e),name:"radiogroup"},{default:f((()=>[v(N,null,{default:f((()=>[v(r,{value:p},{default:f((()=>[I])),_:1},8,["value"]),v(r,{value:u},{default:f((()=>[E])),_:1},8,["value"])])),_:1})])),_:1},8,["value"]),s.value===u?(i(),y(w,{key:0},{default:f((()=>[v(j,{config:o,content:b(C),onUpdate:x,state:n},null,8,["content"])])),_:1})):(i(),y(m(t),h({key:1},l,{value:n,"onUpdate:value":[a[1]||(a[1]=e=>n=e),x]}),null,16))],64)}}});const P={class:"schema-opr-wrap"},U=x(" 修改 "),M=x(" 删除 "),A=x(" 复制 "),D={class:"opr-state-wrap"},V=x(" 保存 "),J=x("更新预览"),Y=x("保存");var z=s({name:"SchemaList",setup(e){const l=r(!1),n=r(),o=r(),u=r(O),s='{\n  "type": "操作备注",\n  "remark": "备注test",\n  "song": "song1",\n  "gender": 1\n}',h=r(s),m=r(JSON.parse(s)),C={ExpressionWrap:W},I=()=>{try{m.value=JSON.parse(h.value)}catch(e){}},E={labelWidth:"80px"},z=r(),B=r(),F=e=>{B.value=e},G=r(!1),H=r(),L=()=>{G.value=!0,H.value=[T()]},R=()=>{const e=u.value;e[o.value]=T(),u.value=e},T=()=>{const e=(l=p({},B.value),n={layout:{span:B.value.layoutSpan,offset:B.value.layoutOffset}},a(l,t(n)));var l,n;return delete e.layoutSpan,delete e.layoutOffset,Object.keys(e).forEach((a=>{""===e[a]&&delete e[a]})),e},q=(e=1)=>"  ".repeat(e),K=(e,a=1)=>{const t=[],l=Object.keys(e),n=l.length;return l.forEach(((l,o)=>{if("object"==typeof e[l])if(Array.isArray(e[l])){t.push(`${q(a)}"${l}": [\n`);const u=e[l].length;e[l].forEach(((e,l)=>{t.push(`${q(a+1)}{\n${K(e,a+2).join("")}${q(a+1)}${l!==u-1?"},\n":"}"}`)})),t.push(`\n${q(a)}]${o!==n-1?",":""}\n`)}else t.push(`${q(a)}"${l}": {\n${K(e[l],a+1).join("")}${q(a)}}${o!==n-1?",":""}\n`);else t.push(`${q(a)}"${l}": ${"string"==typeof e[l]?`"${e[l]}"`:e[l]}${o!==n-1?",":""}\n`)})),t};return r(),(e,a)=>{const t=c("n-text"),s=c("n-button"),r=c("n-button-group"),O=c("n-code"),W=c("n-collapse-item"),T=c("n-collapse"),q=c("n-scrollbar"),Q=c("n-input"),X=c("n-card"),Z=c("NButton"),ee=c("NCard"),ae=c("n-drawer-content"),te=c("n-drawer");return i(),d(g,null,[N("div",P,[v(X,{title:"表单项编辑",contentStyle:"padding: 0","header-style":"height: 50px"},{default:f((()=>[v(q,{style:{height:"70vh"}},{default:f((()=>[v(T,{class:"opr-content-list-wrap"},{default:f((()=>[(i(!0),d(g,null,_(u.value,((e,a)=>(i(),y(W,{name:a,class:"schema-item-wrap"},{header:f((()=>[v(t,null,{default:f((()=>[x(w(["component","label","path"].filter((a=>"string"==typeof e[a])).map((a=>e[a])).join("-")),1)])),_:2},1024)])),"header-extra":f((()=>[v(r,{size:"small"},{default:f((()=>[v(s,{type:"primary",round:"",onClick:S((()=>((e,a)=>{var t,u,s,r;l.value=!0,n.value=e,o.value=a;const c={layoutSpan:null!=(u=null==(t=e.layout)?void 0:t.span)?u:5,layoutOffset:null!=(r=null==(s=e.layout)?void 0:s.offset)?r:0};z.value=p(p({},e),c),F(z.value),L()})(e,a)),["stop"])},{default:f((()=>[U])),_:2},1032,["onClick"]),v(s,{type:"error"},{default:f((()=>[M])),_:1}),v(s,{type:"default"},{default:f((()=>[A])),_:1})])),_:2},1024)])),default:f((()=>[v(O,{code:`{\n${K(e).join("")}}`,language:"json"},null,8,["code"])])),_:2},1032,["name"])))),256))])),_:1})])),_:1}),v(X,{title:"表单初始状态编辑",contentStyle:"padding: 0 10px","header-style":"height: 50px"},{default:f((()=>[N("div",D,[N("div",null,[v(s,{onClick:I},{default:f((()=>[V])),_:1})]),v(Q,{style:{height:"calc(30vh - 110px)"},type:"textarea",value:h.value,"onUpdate:value":a[0]||(a[0]=e=>h.value=e)},null,8,["value"])])])),_:1})])),_:1}),v(X,{title:"表单预览"},{default:f((()=>[v(j,{config:E,content:u.value,state:m.value},null,8,["content","state"])])),_:1})]),v(te,{show:l.value,"onUpdate:show":a[1]||(a[1]=e=>l.value=e),placement:"right",width:"calc(100vw - 600px)"},{default:f((()=>[v(ae,null,{default:f((()=>[v(j,{config:E,customComponents:C,content:b(k),onUpdate:F,state:z.value},null,8,["content","state"]),N("div",null,w(B.value),1),v(ee,{title:"预览"},{"header-extra":f((()=>[v(Z,{onClick:L},{default:f((()=>[J])),_:1}),v(Z,{type:"primary",onClick:R},{default:f((()=>[Y])),_:1})])),default:f((()=>[G.value?(i(),y(j,{key:0,config:E,content:H.value},null,8,["content"])):$("",!0)])),_:1})])),_:1})])),_:1},8,["show"])],64)}}});z.__scopeId="data-v-f866f7b0";var B=s({name:"index",setup:e=>(e,a)=>(i(),y(z))});export{B as default};
