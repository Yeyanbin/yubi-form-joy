var e=Object.defineProperty,a=Object.defineProperties,l=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,u=(a,l,t)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[l]=t,p=(e,a)=>{for(var l in a||(a={}))n.call(a,l)&&u(e,l,a[l]);if(t)for(var l of t(a))o.call(a,l)&&u(e,l,a[l]);return e};import{d as s,a6 as r,r as c,o as i,a8 as d,e as v,w as f,b as y,u as b,ah as h,al as m,aa as g,ac as _,ao as x,a9 as N,ab as w,ad as $,ap as S,aq as j}from"./vendor.4a9bd4b3.js";import{_ as O}from"./index.vue_vue_type_script_setup_true_lang.182cf2df.js";const k=[{component:"div",inner:"这是一个div"},{component:"h1",inner:"这是一个标题",layout:{span:10}},{component:"NInput",label:{expression:"{type}",value:"默认标题"},type:"textarea",layout:{span:5},path:"remark"},{component:"NSelect",label:"选择歌曲",path:"song",layout:{span:3},options:[{label:"Everybody's Got Something to Hide Except Me and My Monkey",value:"song0",disabled:!0},{label:"Drive My Car",value:"song1"},{label:"Norwegian Wood",value:"song2"},{label:"You Won't See",value:"song3",disabled:!0},{label:"Nowhere Man",value:"song4"},{label:"Think For Yourself",value:"song5"}]},{component:"NSelect",label:"性别",path:"gender",layout:{span:2},options:[{label:"女",value:0},{label:"男",value:1}]},{show:{type:"boolean",expression:"{gender} = 1"},component:"NInput",label:"薪资多少",path:"income"}],C=[{component:"NInput",path:"path",label:"字段",layout:{span:4}},{component:"ExpressionWrap",innerComponent:"NInput",path:"label",label:"表单项标题",layout:{span:4,offset:1}},{component:"ExpressionWrap",innerComponent:"NInput",path:"inner",label:"内容",layout:{span:4}},{component:"NSelect",path:"component",label:"组件",filterable:!0,tag:!0,layout:{offset:1,span:4},options:[{label:"输入框",value:"NInput"},{label:"选择器",value:"NSelect"},{label:"单选框",value:"NRadio"},{label:"开关",value:"NSwitch"},{label:"复选框",value:"Checkbox"},{label:"日期选择器",value:"NDatePicker"}]},{component:"NInputNumber",path:"layoutSpan",label:"Span",max:10,min:1,defaultValue:2,style:{width:"100%"},layout:{span:4}},{component:"NInputNumber",path:"layoutOffset",label:"偏移",max:10,min:0,defaultValue:2,style:{width:"100%"},layout:{offset:1,span:4}}],I=[{component:"NInput",path:"value",label:"默认值",layout:{span:10}},{component:"NInput",path:"expression",label:"表达式",layout:{span:10}},{component:"NSelect",path:"type",label:"数据类型",layout:{span:10},options:[{label:"数字",value:"number"},{label:"字符串",value:""},{label:"布尔值",value:"boolean"}]}],E=_(" 值 "),W=_(" 表达式 ");var P=s({name:"ExpressionWrap",props:{innerComponent:null,innerAttr:null,value:{default:""}},emits:["updateValue","update:value"],setup(e,{emit:a}){const{innerComponent:l,innerAttr:t,value:n}=e,o={labelPlacement:"left",labelWidth:"80px"},u=r(n),p=1,s=2,_=r("object"==typeof n?p:s),x=e=>{a("updateValue",e)};return(e,a)=>{const n=c("n-radio"),r=c("n-space"),N=c("n-radio-group"),w=c("n-card");return i(),d(g,null,[v(N,{value:_.value,"onUpdate:value":a[0]||(a[0]=e=>_.value=e),name:"radiogroup"},{default:f((()=>[v(r,null,{default:f((()=>[v(n,{value:s},{default:f((()=>[E])),_:1},8,["value"]),v(n,{value:p},{default:f((()=>[W])),_:1},8,["value"])])),_:1})])),_:1},8,["value"]),_.value===p?(i(),y(w,{key:0},{default:f((()=>[v(O,{config:o,content:b(I),onUpdate:x},null,8,["content"])])),_:1})):(i(),y(m(l),h({key:1},t,{value:u.value,"onUpdate:value":[a[1]||(a[1]=e=>u.value=e),x]}),null,16,["value"]))],64)}}});const U={class:"schema-opr-wrap"},M=_(" 修改 "),A=_(" 删除 "),V=_(" 复制 "),D={class:"opr-state-wrap"},J=_(" 保存 "),Y=_("更新预览"),q=_("保存");var z=s({name:"index",setup(e){const t=x(),n=r(!1),o=r(),u=r(),s=r(k),h='{\n  "type": "操作备注",\n  "remark": "备注test",\n  "song": "song1",\n  "gender": 1\n}',m=r(h),I=r(JSON.parse(h)),E={ExpressionWrap:P},W=()=>{try{I.value=JSON.parse(m.value)}catch(e){}},z={labelWidth:"80px"},B=r(),F=r(),G=e=>{F.value=e},H=r(!1),R=r(),T=()=>{H.value=!0,R.value=[L()]},K=()=>{const e=s.value;e[u.value]=L(),s.value=e,t.success(`修改第${u.value+1}个表单项配置成功`),n.value=!1},L=()=>{const e=(t=p({},F.value),n={layout:{span:F.value.layoutSpan,offset:F.value.layoutOffset}},a(t,l(n)));var t,n;return delete e.layoutSpan,delete e.layoutOffset,Object.keys(e).forEach((a=>{""===e[a]&&delete e[a]})),e},Q=e=>["component","label","path"].filter((a=>"string"==typeof e[a])).map((a=>e[a])).join("-"),X=(e=1)=>"  ".repeat(e),Z=(e,a=1)=>{const l=[],t=Object.keys(e),n=t.length;return t.forEach(((t,o)=>{if("object"==typeof e[t])if(Array.isArray(e[t])){l.push(`${X(a)}"${t}": [\n`);const u=e[t].length;e[t].forEach(((e,t)=>{l.push(`${X(a+1)}{\n${Z(e,a+2).join("")}${X(a+1)}${t!==u-1?"},\n":"}"}`)})),l.push(`\n${X(a)}]${o!==n-1?",":""}\n`)}else l.push(`${X(a)}"${t}": {\n${Z(e[t],a+1).join("")}${X(a)}}${o!==n-1?",":""}\n`);else l.push(`${X(a)}"${t}": ${"string"==typeof e[t]?`"${e[t]}"`:e[t]}${o!==n-1?",":""}\n`)})),l};return(e,a)=>{const l=c("n-text"),t=c("n-button"),r=c("n-button-group"),h=c("n-code"),x=c("n-collapse-item"),k=c("n-collapse"),P=c("n-scrollbar"),L=c("n-input"),X=c("n-card"),ee=c("NButton"),ae=c("NCard"),le=c("n-drawer-content"),te=c("n-drawer");return i(),d(g,null,[N("div",U,[v(X,{title:"表单项编辑",contentStyle:"padding: 0","header-style":"height: 50px"},{default:f((()=>[v(P,{style:{height:"70vh"}},{default:f((()=>[v(k,{class:"opr-content-list-wrap"},{default:f((()=>[(i(!0),d(g,null,w(s.value,((e,a)=>(i(),y(x,{name:a,class:"schema-item-wrap"},{header:f((()=>[v(l,null,{default:f((()=>[_($(Q(e)),1)])),_:2},1024)])),"header-extra":f((()=>[v(r,{size:"small"},{default:f((()=>[v(t,{type:"primary",round:"",onClick:S((()=>((e,a)=>{var l,t,s,r;n.value=!0,o.value=e,u.value=a;const c={layoutSpan:null!=(t=null==(l=e.layout)?void 0:l.span)?t:5,layoutOffset:null!=(r=null==(s=e.layout)?void 0:s.offset)?r:0};B.value=p(p({},e),c),G(B.value),T()})(e,a)),["stop"])},{default:f((()=>[M])),_:2},1032,["onClick"]),v(t,{type:"error"},{default:f((()=>[A])),_:1}),v(t,{type:"default"},{default:f((()=>[V])),_:1})])),_:2},1024)])),default:f((()=>[v(h,{code:`{\n${Z(e).join("")}}`,language:"json"},null,8,["code"])])),_:2},1032,["name"])))),256))])),_:1})])),_:1}),v(X,{title:"表单初始状态编辑",contentStyle:"padding: 0 10px","header-style":"height: 50px"},{default:f((()=>[N("div",D,[N("div",null,[v(t,{onClick:W},{default:f((()=>[J])),_:1})]),v(L,{style:{height:"calc(30vh - 110px)"},type:"textarea",value:m.value,"onUpdate:value":a[0]||(a[0]=e=>m.value=e)},null,8,["value"])])])),_:1})])),_:1}),v(X,{title:"表单预览"},{default:f((()=>[v(O,{config:z,content:s.value,state:I.value},null,8,["content","state"])])),_:1})]),v(te,{show:n.value,"onUpdate:show":a[1]||(a[1]=e=>n.value=e),placement:"right",width:"calc(100vw - 600px)"},{default:f((()=>[v(le,null,{default:f((()=>[v(O,{config:z,customComponents:E,content:b(C),onUpdate:G,state:B.value},null,8,["content","state"]),N("div",null,$(F.value),1),v(ae,{title:"预览"},{"header-extra":f((()=>[v(ee,{onClick:T},{default:f((()=>[Y])),_:1}),v(ee,{type:"primary",onClick:K},{default:f((()=>[q])),_:1})])),default:f((()=>[H.value?(i(),y(O,{key:0,config:z,content:R.value},null,8,["content"])):j("",!0)])),_:1})])),_:1})])),_:1},8,["show"])],64)}}});z.__scopeId="data-v-cd445b30";export{z as default};
