var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,u=(a,t,l)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[t]=l,p=(e,a)=>{for(var t in a||(a={}))n.call(a,t)&&u(e,t,a[t]);if(l)for(var t of l(a))o.call(a,t)&&u(e,t,a[t]);return e};import{d as s,a6 as r,r as c,o as i,a8 as d,e as v,w as f,b as y,u as b,ah as h,al as m,aa as g,ac as x,ao as N,a9 as _,ab as w,ad as $,ap as S,aq as j}from"./vendor.58d21d8c.js";import{_ as O}from"./index.vue_vue&type=script&setup=true&lang.c0c81677.js";const k=[{component:"div",inner:"这是一个div"},{component:"h1",inner:"这是一个标题",layout:{span:10}},{component:"NInput",label:{expression:"{type}",value:"默认标题"},type:"textarea",layout:{span:5},path:"remark"},{component:"NSelect",label:"选择歌曲",path:"song",layout:{span:3},options:[{label:"Everybody's Got Something to Hide Except Me and My Monkey",value:"song0",disabled:!0},{label:"Drive My Car",value:"song1"},{label:"Norwegian Wood",value:"song2"},{label:"You Won't See",value:"song3",disabled:!0},{label:"Nowhere Man",value:"song4"},{label:"Think For Yourself",value:"song5"}]},{component:"NSelect",label:"性别",path:"gender",layout:{span:2},options:[{label:"女",value:0},{label:"男",value:1}]},{show:{type:"boolean",expression:"{gender} = 1"},component:"NInput",label:"薪资多少",path:"income"}],C=[{component:"NInput",path:"path",label:"字段",layout:{span:4}},{component:"ExpressionWrap",innerComponent:"NInput",path:"label",label:"表单项标题",layout:{span:4,offset:1}},{component:"ExpressionWrap",innerComponent:"NInput",path:"inner",label:"内容",layout:{span:4}},{component:"NSelect",path:"component",label:"组件",filterable:!0,tag:!0,layout:{offset:1,span:4},options:[{label:"输入框",value:"NInput"},{label:"选择器",value:"NSelect"},{label:"单选框",value:"NRadio"},{label:"开关",value:"NSwitch"},{label:"复选框",value:"Checkbox"},{label:"日期选择器",value:"NDatePicker"}]},{component:"NInputNumber",path:"layoutSpan",label:"Span",max:10,min:1,defaultValue:2,style:{width:"100%"},layout:{span:4}},{component:"NInputNumber",path:"layoutOffset",label:"偏移",max:10,min:0,defaultValue:2,style:{width:"100%"},layout:{offset:1,span:4}}],I=[{component:"NInput",path:"value",label:"默认值",layout:{span:10}},{component:"NInput",path:"expression",label:"表达式",layout:{span:10}},{component:"NSelect",path:"type",label:"数据类型",layout:{span:10},options:[{label:"数字",value:"number"},{label:"字符串",value:""},{label:"布尔值",value:"boolean"}]}],E=x(" 值 "),W=x(" 表达式 ");var P=s({name:"ExpressionWrap",props:{innerComponent:null,innerAttr:null,value:{default:""}},emits:["updateValue","update:value"],setup(e,{emit:a}){const{innerComponent:t,innerAttr:l,value:n}=e,o={labelPlacement:"left",labelWidth:"80px"},u=1,p=2,s=r("object"==typeof n?u:p),x=e=>{a("update:value",e)};return(e,a)=>{const r=c("n-radio"),N=c("n-space"),_=c("n-radio-group"),w=c("n-card");return i(),d(g,null,[v(_,{value:s.value,"onUpdate:value":a[0]||(a[0]=e=>s.value=e),name:"radiogroup"},{default:f((()=>[v(N,null,{default:f((()=>[v(r,{value:p},{default:f((()=>[E])),_:1},8,["value"]),v(r,{value:u},{default:f((()=>[W])),_:1},8,["value"])])),_:1})])),_:1},8,["value"]),s.value===u?(i(),y(w,{key:0},{default:f((()=>[v(O,{config:o,content:b(I),onUpdate:x,state:n},null,8,["content"])])),_:1})):(i(),y(m(t),h({key:1},l,{value:n,"onUpdate:value":[a[1]||(a[1]=e=>n=e),x]}),null,16))],64)}}});const U={class:"schema-opr-wrap"},M=x(" 修改 "),A=x(" 删除 "),D=x(" 复制 "),V={class:"opr-state-wrap"},J=x(" 保存 "),Y=x("更新预览"),q=x("保存");var z=s({name:"index",setup(e){const l=N(),n=r(!1),o=r(),u=r(),s=r(k),h='{\n  "type": "操作备注",\n  "remark": "备注test",\n  "song": "song1",\n  "gender": 1\n}',m=r(h),I=r(JSON.parse(h)),E={ExpressionWrap:P},W=()=>{try{I.value=JSON.parse(m.value)}catch(e){}},z={labelWidth:"80px"},B=r(),F=r(),G=e=>{F.value=e},H=r(!1),R=r(),T=()=>{H.value=!0,R.value=[L()]},K=()=>{const e=s.value;e[u.value]=L(),s.value=e,l.success(`修改第${u.value+1}个表单项配置成功`),n.value=!1},L=()=>{const e=(l=p({},F.value),n={layout:{span:F.value.layoutSpan,offset:F.value.layoutOffset}},a(l,t(n)));var l,n;return delete e.layoutSpan,delete e.layoutOffset,Object.keys(e).forEach((a=>{""===e[a]&&delete e[a]})),e},Q=e=>["component","label","path"].filter((a=>"string"==typeof e[a])).map((a=>e[a])).join("-"),X=(e=1)=>"  ".repeat(e),Z=(e,a=1)=>{const t=[],l=Object.keys(e),n=l.length;return l.forEach(((l,o)=>{if("object"==typeof e[l])if(Array.isArray(e[l])){t.push(`${X(a)}"${l}": [\n`);const u=e[l].length;e[l].forEach(((e,l)=>{t.push(`${X(a+1)}{\n${Z(e,a+2).join("")}${X(a+1)}${l!==u-1?"},\n":"}"}`)})),t.push(`\n${X(a)}]${o!==n-1?",":""}\n`)}else t.push(`${X(a)}"${l}": {\n${Z(e[l],a+1).join("")}${X(a)}}${o!==n-1?",":""}\n`);else t.push(`${X(a)}"${l}": ${"string"==typeof e[l]?`"${e[l]}"`:e[l]}${o!==n-1?",":""}\n`)})),t};return(e,a)=>{const t=c("n-text"),l=c("n-button"),r=c("n-button-group"),h=c("n-code"),N=c("n-collapse-item"),k=c("n-collapse"),P=c("n-scrollbar"),L=c("n-input"),X=c("n-card"),ee=c("NButton"),ae=c("NCard"),te=c("n-drawer-content"),le=c("n-drawer");return i(),d(g,null,[_("div",U,[v(X,{title:"表单项编辑",contentStyle:"padding: 0","header-style":"height: 50px"},{default:f((()=>[v(P,{style:{height:"70vh"}},{default:f((()=>[v(k,{class:"opr-content-list-wrap"},{default:f((()=>[(i(!0),d(g,null,w(s.value,((e,a)=>(i(),y(N,{name:a,class:"schema-item-wrap"},{header:f((()=>[v(t,null,{default:f((()=>[x($(Q(e)),1)])),_:2},1024)])),"header-extra":f((()=>[v(r,{size:"small"},{default:f((()=>[v(l,{type:"primary",round:"",onClick:S((()=>((e,a)=>{var t,l,s,r;n.value=!0,o.value=e,u.value=a;const c={layoutSpan:null!=(l=null==(t=e.layout)?void 0:t.span)?l:5,layoutOffset:null!=(r=null==(s=e.layout)?void 0:s.offset)?r:0};B.value=p(p({},e),c),G(B.value),T()})(e,a)),["stop"])},{default:f((()=>[M])),_:2},1032,["onClick"]),v(l,{type:"error"},{default:f((()=>[A])),_:1}),v(l,{type:"default"},{default:f((()=>[D])),_:1})])),_:2},1024)])),default:f((()=>[v(h,{code:`{\n${Z(e).join("")}}`,language:"json"},null,8,["code"])])),_:2},1032,["name"])))),256))])),_:1})])),_:1}),v(X,{title:"表单初始状态编辑",contentStyle:"padding: 0 10px","header-style":"height: 50px"},{default:f((()=>[_("div",V,[_("div",null,[v(l,{onClick:W},{default:f((()=>[J])),_:1})]),v(L,{style:{height:"calc(30vh - 110px)"},type:"textarea",value:m.value,"onUpdate:value":a[0]||(a[0]=e=>m.value=e)},null,8,["value"])])])),_:1})])),_:1}),v(X,{title:"表单预览"},{default:f((()=>[v(O,{config:z,content:s.value,state:I.value},null,8,["content","state"])])),_:1})]),v(le,{show:n.value,"onUpdate:show":a[1]||(a[1]=e=>n.value=e),placement:"right",width:"calc(100vw - 600px)"},{default:f((()=>[v(te,null,{default:f((()=>[v(O,{config:z,customComponents:E,content:b(C),onUpdate:G,state:B.value},null,8,["content","state"]),_("div",null,$(F.value),1),v(ae,{title:"预览"},{"header-extra":f((()=>[v(ee,{onClick:T},{default:f((()=>[Y])),_:1}),v(ee,{type:"primary",onClick:K},{default:f((()=>[q])),_:1})])),default:f((()=>[H.value?(i(),y(O,{key:0,config:z,content:R.value},null,8,["content"])):j("",!0)])),_:1})])),_:1})])),_:1},8,["show"])],64)}}});z.__scopeId="data-v-cd445b30";export{z as default};
