var e=Object.defineProperty,t=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,n=(t,o,a)=>o in t?e(t,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[o]=a,r=(e,r)=>{for(var s in r||(r={}))o.call(r,s)&&n(e,s,r[s]);if(t)for(var s of t(r))a.call(r,s)&&n(e,s,r[s]);return e};import{ar as s,d as u,ac as l,as as p,e as i,an as f,r as c,f as h,w as d,af as v,i as m,o as g,g as b,ad as y,at as j,ag as w,ah as _,ai as x,ap as O,ae as P,au as E}from"./vendor.12723aba.js";const N=(e,t)=>{const o={};return e.forEach((e=>{e.path&&(o[e.path]=t[e.path]||e.defaultValue||"")})),o},R=s({labelWidth:"100px",size:"small"});var C=(e,{toReversePolishNotation:t,computeReversePolishNotation:o})=>{const a=e=>{const t={};return Object.keys(e).forEach((o=>{"string"==typeof e[o]||"number"==typeof e[o]||Array.isArray(e[o])?t[o]=e[o]:"object"==typeof e[o]?void 0!==e[o].value||void 0!==e[o].expression?t[o]=n(e[o]):t[o]=a(e[o]):t[o]=e[o]})),t},n=e=>{const{value:t,expression:o}=e;return o&&r(o)||t},r=e=>o(t(e)),s=[];return e.forEach((e=>{if(e.show){const t=r(e.show.expression)||e.show.value;t&&"false"!==t&&s.push(a(e))}else s.push(a(e))})),s},U=(e,t,o={})=>{const a={"=":0,">":0,"<":0,"&":0,"|":0,"+":1,"-":1,"*":2,"/":2,"^":3},n=r({"=":(e,t)=>e===t?1:0,">":(e,t)=>e>t?1:0,"<":(e,t)=>e<t?1:0,"&":(e,t)=>e&t?1:0,"|":(e,t)=>e|t?1:0,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"*":(e,t)=>e*t,"/":(e,t)=>e/t,"^":(e,t)=>Math.pow(e,t)},o&&o.otherOperators),s=(e,t)=>"{"!==e[t]?l(e,t):p(e,t),u=(e,t)=>{if("$"!==e[t])return[e[t],t];const o=[],a=t+=1;for(;!n[o.join("")]&&void 0!==e[t];)o.push(e[t]),t+=1;if(void 0===e[t])throw new Error(`Can't found operator sign by start ${a}`);return[o.join(""),t]},l=(e,t)=>{const o=[];for(;Number.isInteger(+e[t])||"."===e[t];)o.push(e[t]),++t;return[+o.join(""),t-1]},p=(o,a)=>{a+=1;const n=[];for(;"}"!==o[a];)n.push(o[a]),++a;return[void 0!==t[n.join("")]?t[n.join("")]:e[n.join("")],a]};return{toReversePolishNotation:e=>{const t=[],o=[];for(let n=0,r=e.length;n<r;++n)if(void 0!==a[e[n]]||"$"===e[n]){let r;for([r,n]=u(e,n);o.length>0;){const e=o.pop();if(a[r]>a[e]||"("===e){o.push(e);break}t.push(e)}o.push(r)}else if("("===e[n])o.push("(");else if(")"===e[n]){let e="";for(;"("!==(e=o.pop());)t.push(e)}else if(" "===e[n]);else{let o=0;[o,n]=s(e,n),t.push(o)}for(;o.length>0;)t.push(o.pop());return t},computeReversePolishNotation:e=>{if(!e.includes(void 0)){if(e.length>1){const t=[];return e.forEach((e=>{var o,a;n[e]?t.push((o=t.pop(),a=t.pop(),n[e](a,o))):t.push(e)})),t.pop()}return e.pop()}}}},V=u({__name:"index",props:{rules:{default:()=>({})},content:null,state:{default:()=>({})},customComponents:{default:()=>({})},config:{default:()=>({})}},emits:["change","update"],setup(e,{emit:t}){const o=e,a=l(N(o.content,o.state));p(o,(()=>{a.value=N(o.content,o.state)}));const n=i((()=>{const e=U(o.state,a.value);return C(o.content,e)}),{onTrack:e=>{},onTrigger:e=>{}});return p(n,(e=>{t("change",{formValue:a.value,formContent:e})})),p(a.value,(e=>{C(o.content,U(o.state,e)),t("update",e)})),f((()=>{t("update",a.value)})),(e,t)=>{const s=c("n-form-item"),u=c("n-grid-item"),l=c("n-grid"),p=c("n-form");return g(),h(p,v(r(r({},m(R)),o.config),{model:a.value,rules:o.rules,ref:"formRef",inline:""}),{default:d((()=>[b(l,{cols:10},{default:d((()=>[(g(!0),y(O,null,j(m(n),(e=>(g(),h(u,v({span:"10"},e.layout,{style:{padding:"5px 10px"}}),{default:d((()=>[b(s,v(e,{prop:e.path}),{default:d((()=>{var t;return[(g(),h(w(null!=(t=o.customComponents[e.component])?t:e.component),v(e,{value:a.value[e.path],"onUpdate:value":t=>a.value[e.path]=t,onUpdateValue:t=>((e,t)=>{const o=a.value;o[e]=t,a.value=o})(e.path,t)}),{default:d((()=>[_(x(e.inner)+" ",1),(g(!0),y(O,null,j(e.childList,(e=>(g(),h(w(e.component),P(E(e)),{default:d((()=>[_(x(e.inner),1)])),_:2},1040)))),256))])),_:2},1040,["value","onUpdate:value","onUpdateValue"]))]})),_:2},1040,["prop"])])),_:2},1040)))),256))])),_:1})])),_:1},16,["model","rules"])}}});export{V as _};
